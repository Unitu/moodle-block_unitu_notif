{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template block_unitu_notif/notifications
    
    Notifications template.

    Example context (json):
    {
        "title": "Together We Changed",
        "body": "post"
    }
}}
<div class="student-voice-wrapper">
    {{#posts}}
    <div class="post">
        <div class="post-header">
            <div class="details">
                <img src="{{userimage}}" alt="Profile Image">
                <div class="name-role">
                    <h2>{{username}} <span>{{userrole}}</span></h2>
                    <span class="department">{{departments}}</span>
                </div>
            </div>            
        </div>
        <div class="post-content">
            <h6><a href="{{url}}" target="_blank">{{title}}</a></h6>
            <p class="postdetail">
                <span class="short-content">{{content}}</span>
                <span class="full-content" style="display: none;">{{fullcontent}}</span>
                {{#readmorelink}}
                    <a class="read-more-link" onclick="toggleReadMore(this)">{{#str}}readmore, block_unitu_notif{{/str}}</a>
                {{/readmorelink}}
            </p>
        </div>            
        <div class="post-footer">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 21.65C11.69 21.65 11.39 21.61 11.14 21.52C7.32 20.21 1.25 15.56 1.25 8.68998C1.25 5.18998 4.08 2.34998 7.56 2.34998C9.25 2.34998 10.83 3.00998 12 4.18998C13.17 3.00998 14.75 2.34998 16.44 2.34998C19.92 2.34998 22.75 5.19998 22.75 8.68998C22.75 15.57 16.68 20.21 12.86 21.52C12.61 21.61 12.31 21.65 12 21.65ZM7.56 3.84998C4.91 3.84998 2.75 6.01998 2.75 8.68998C2.75 15.52 9.32 19.32 11.63 20.11C11.81 20.17 12.2 20.17 12.38 20.11C14.68 19.32 21.26 15.53 21.26 8.68998C21.26 6.01998 19.1 3.84998 16.45 3.84998C14.93 3.84998 13.52 4.55998 12.61 5.78998C12.33 6.16998 11.69 6.16998 11.41 5.78998C10.48 4.54998 9.08 3.84998 7.56 3.84998Z" fill="currentColor"/>
            </svg>
            {{likes}}
            <small class="date">{{date}}</small>
        </div>
    </div>
    {{/posts}}
</div>
<script>
function toggleReadMore(link) {
    const postDetail = link.closest('.postdetail');
    const shortContent = postDetail.querySelector('.short-content');
    const fullContent = postDetail.querySelector('.full-content');
    const isExpanded = fullContent.style.display === 'block';
    if (isExpanded) {
        fullContent.style.display = 'none';
        shortContent.style.display = 'inline';
        link.textContent = '{{#str}}readmore, block_unitu_notif{{/str}}';
    } else {
        fullContent.style.display = 'block';
        shortContent.style.display = 'none';
        link.textContent = '{{#str}}readless, block_unitu_notif{{/str}}';
    }
}
</script>
